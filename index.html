<!DOCTYPE html>
{% autoescape true %}

<html>
<head>
<meta charset="utf-8">
<title>GMaps.js &mdash; Tests</title>
<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.6.4/jquery.min.js"></script>
<script type="text/javascript" src="http://maps.google.com/maps/api/js?sensor=true"></script>
<script type="text/javascript" src="https://raw.github.com/HPNeo/gmaps/master/gmaps.js"></script>
<link rel="stylesheet" href="http://twitter.github.com/bootstrap/1.3.0/bootstrap.min.css" />
<link rel="stylesheet" type="text/css" href="https://linux.ime.usp.br/~scaroni/gmaps/example.css" />

<script type="text/javascript">
    var map;
    $(document).ready(function(){
      map = new GMaps({
        el: '#map',
        lat: {{orig[0]}},
        lng: {{orig[1]}},
        zoomControl : true,
        zoomControlOpt: {
        style : 'SMALL',
        position: 'TOP_LEFT'
        },
        panControl : false,
        streetViewControl : false,
        mapTypeControl: false,
        overviewMapControl: false        
      });
    });


    var waypoints = [];
    function GenerateMarkers () {
      map.addMarker({
        lat: {{orig[0]}},
        lng: {{orig[1]}},
        title: '{{orig[2]}}'
      });

      
      {% for way in waypts %}
        waypoints.push({
          location:  new google.maps.LatLng({{way[0]}}, {{way[1]}}),
          stopover:true
        });
        map.addMarker({
          lat: {{way[0]}},
          lng: {{way[1]}},
          title: '{{way[2]}}'
        });
      {% endfor %}

      map.addMarker({
        lat: {{dest[0]}},
        lng: {{dest[1]}},
        title: '{{dest[2]}}'
      });

    }

    function DrawMap () {
      GenerateMarkers();

      map.drawRoute({
        origin: [{{orig[0]}}, {{orig[1]}}],
        destination: [{{dest[0]}}, {{dest[1]}}],
        travelMode: 'driving',
        waypoints,
        strokeColor: '#131540',
        strokeOpacity: 0.6,
        strokeWeight: 6
      });
    }
  </script>
</head>


<body>
<h1>GMaps.js &mdash; Tests</h1>
<div class="span11">
<div id="map"></div>
</div>
<div class="span11">
<button type="button" onclick="DrawMap()">Desenhar rota IME-MASP passando pelo Eldorado</button>
</div>
</body>

</html>
{% endautoescape %}
